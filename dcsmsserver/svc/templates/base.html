<!DOCTYPE HTML>
<!-- 
"""""""""""""""""""""'''''''''''''''WE'RE HIRING'''''''''''''''''''''''""""""""""""""""""""""""
			
				DEVELOPERS !! DEVELOPERS !! DEVELOPERS !!
				
				mailto   : hr@digicollectgis.com
				linkedin : https://www.linkedin.com/company/digicollect-gis
			
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
 -->
<html lang="en">
<head>
<meta charset="UTF-8" name="viewport"
	content="width=device-width, initial-scale=1">
<title>DCSMSServer | DC SMS Services</title>
<link rel="icon" href="../../static/src/img/favicon-32x32.png"
	type="image/png">
<link rel="stylesheet"
	href="../../static/dependencies/jquery-ui-1.10.4/css/ui-redmond/jquery-ui-1.11.1.min.css" />
<link rel="stylesheet"
	href="../../static/dependencies/bootstrap-3.2.0-dist/css/bootstrap.min.css" />
<link rel="stylesheet"
	href="../../static/dependencies/bootstrap-3.2.0-dist/css/bootstrap-theme.min.css" />
<link rel="stylesheet"
	href="../../static/dependencies/bootstrap-3.2.0-dist/css/bootstrap-glyphicons.css" />
<link rel="stylesheet"
	href="../../static/dependencies/bootstrap-3.2.0-dist/css/jquery.dataTables.min.css">
<link rel="stylesheet"
	href="../../static/dependencies/bootstrap-3.2.0-dist/css/bootstrap-social.css">
<link rel="stylesheet"
	href="../../static/dependencies/bootstrap-3.2.0-dist/css/font-awesome.css">
<link
	href="../../static/dependencies/bootstrap-3.2.0-dist/css/introjs.css"
	rel="stylesheet">
<script src="../../static/dependencies/jquery/jquery-2.1.1.min.js"
	type="text/javascript"></script>
<script
	src="../../static/dependencies/jquery-ui-1.10.4/js/jquery-ui-1.10.4.min.js"
	type="text/javascript"></script>
<script
	src="../../static/dependencies/bootstrap-3.2.0-dist/js/bootstrap.min.js"
	type="text/javascript"></script>
<script
	src="../../static/dependencies/bootstrap-3.2.0-dist/js/bootstrap-typeahead.js"
	type="text/javascript"></script>
<script
	src="../../static/dependencies/bootstrap-3.2.0-dist/js/bootstrap.file-input.js"
	type="text/javascript"></script>
<script
	src="../../static/dependencies/bootstrap-3.2.0-dist/js/bootstrap-filestyle.js"
	type="text/javascript"></script>
<script
	src="../../static/dependencies/bootstrap-3.2.0-dist/js/bootstrap-hover-dropdown.min.js"
	type="text/javascript"></script>
<script
	src="../../static/dependencies/bootstrap-3.2.0-dist/js/jquery.dataTables.min.js"
	type="text/javascript"></script>
<script src="../../static/dependencies/bootboxjs/bootbox.min.js"
	type="text/javascript"></script>
<script src="../../static/dependencies/chartjs/Chart.min.js"
	type="text/javascript"></script>
<script
	src="../../static/dependencies/touch-punch/jquery.ui.touch-punch.min.js"
	type="text/javascript"></script>
<script src="../../static/src/js/dcpasswordpicker.js"
	type="text/javascript"></script>
<script src="../../static/src/js/dclocalstoragehandler.js"
	type="text/javascript"></script>
<script src="../../static/src/js/dclocalsessionhandler.js"
	type="text/javascript"></script>
<link
	href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,800,700'
	rel='stylesheet' type='text/css'>
</head>
<body>
	<nav class="navbar navbar-inverse navbar-static-top"
		style="background-color: #3c3c3c;" role="navigation">
		<div class="container-fluid" style="background-color: #3c3c3c;">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target="#myNavbar">
					<span class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#" style="font-size: 22px;"><span
					style="color: #388ebb;">DC</span><span style="color: #ff8c00;">SMSServer</span></a>
			</div>
			<div class="collapse navbar-collapse" id="myNavbar"
				style="background-color: #3c3c3c;">
				<ul class="nav navbar-nav" id="ul-menu" role="menu">
					<li class="dropdown" id="liMode"><a
						class="dropdown-toggle  js-activated" data-toggle="dropdown"
						href="dcmap" data-step="2"
						data-intro="Click to view the Site Layout" data-position='bottom'>Map&nbsp;<span
							class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
							<li><a href="dcmap" id="li-map-mode">View Map</a></li>
							<li class="divider"></li>
							<li><a href="#" id="li-edit-mode">Edit Mode<i
									class="fa fa-check" style='color: #428bca;'></i>
							</a></li>
							<li><a href="#" id="li-view-mode">View Mode<i
									class="fa fa-check" style='color: #428bca;'></i>
							</a></li>
							<li class="divider"></li>
							<li><a href="#" id="li-print-map">Print Map</a></li>
						</ul></li>
					<li class="dropdown" id="liAdmin"><a
						class="dropdown-toggle  js-activated" data-toggle="dropdown"
						href="#" data-step="3"
						data-intro="Click to see options to control data to your layout and how you want users to see it."
						data-position='bottom'>Adminster&nbsp;<span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
							<li><a href="usersandroles">Users and Roles</a></li>
							<li class="divider"></li>
							<li><a href="addremcolumns">Add/Remove Columns</a></li>
							<li class="divider"></li>
							<li><a href="editcolumns">View/Edit Columns</a></li>
							<li class="divider"></li>
							<li><a href="permissions">Permissions</a></li>
							<li class="divider"></li>
							<li><a href="sitebookings">Bookings History</a></li>
							<li class="divider"></li>
							<li><a href="enquiries">Enquiries</a></li>
							<li class="divider"></li>
							<li><a href="sociallinks">Social Links</a></li>
							<li class="divider"></li>
							<li><a href="svanalytics">Analytics</a></li>
			                -->
						</ul></li>
					<li class="dropdown" id="liReports"><a
						class="dropdown-toggle  js-activated" data-toggle="dropdown"
						href="#" data-step="4"
						data-intro="Click to view various reports on sales and marketing.."
						data-position='bottom'>Reports&nbsp;<span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
							<li><a href="repsalesstatus" id="li-view-mode">Sales Per
									Status</a></li>
							<li class="divider"></li>
							<li><a href="repsalessqft" id="li-print-map">Sales Per
									Sq.Ft.</a></li>
							<!-- <li class="divider"></li>
				        	<li><a href="repsalestimeline" id="li-edit-mode">Marketing Report</a></li>
					        	<li class="divider"></li>
				        	<li><a href="repsalestimeline" id="li-edit-mode">Aggregation Report</a></li>
				        	<li class="divider"></li>
				        	<li><a href="repsalestimeline" id="li-edit-mode">Sales Progress</a></li> -->
						</ul></li>
					<!--<li class="dropdown" id="liMarketing"><a class="dropdown-toggle js-activated" data-toggle="dropdown" href="#">Marketing<span class="caret"></span></a>
		        	<ul class="dropdown-menu">
			            <li><a href="repsalesstatus" id="li-view-mode">My Sales</a></li>
			        	<li class="divider"></li>
			        	<li><a href="repsalessqft" id="li-print-map">My Notifications</a></li>
					</ul>
       			</li>-->
				<li class="dropdown" id="liImport"><a
					class="dropdown-toggle js-activated" data-toggle="dropdown"
					href="#">Layers&nbsp;<span class="caret"></span></a>
					<ul class="dropdown-menu" role="menu">
						<li><a href="addlayer" id="li-edit-mode">Add Layers</a></li>
						<li class="divider"></li>
						<li><a href="managelayer" id="li-view-mode">Manage
								Layout Data</a></li>
						<li class="divider"></li>
						<li><a href="dwnldlayer" id="li-print-map">Export Layout
								Data</a></li>
					</ul></li>
				
				<li><a id="a-logout" href="logout">Logout</a></li>
				
				
				</ul>
				<ul class="nav navbar-nav navbar-right" id="left-menu">
	            {% if social_links %} 
                     {% for x in social_links %}
	            <li>
			        <a href="{{x.facebook_link}}" target="_blank" id="facebook">
			            <i style="color:#6d84b4;" class="fa fa-facebook fa-lg" title="Facebook"></i>
			        </a>
		        </li>
	            <li>
		            <a href="{{x.google_link}}" target="_blank">               
		                <i style="color:#dd4b39;" class="fa fa-google-plus fa-lg" title="Google Plus"></i>
		            </a> 
	            <li>
		            <a href="{{x.pinterest_link}}" target="_blank"> 
		                <i style="color:#cb2027;" class="fa fa-pinterest fa-lg" title="Pinterest"></i>
		            </a>  
	            </li>
	            <li>
	                <a href="{{x.youtube_link}}" target="_blank">
	                    <i style="color:#bb0000;" class="fa fa-youtube fa-lg" title="Youtube"></i>
	                </a>   
	            </li>
	             {% endfor %}
				 {% else %}
				    <!--
					<tr class="alert alert-warning">
						<td colspan="6"  class="alert alert-warning">
							No any url details present..
						</td>
					</tr>
					-->
				 {% endif %}
	            <li class="dropdown" id="notification">
	                <a href="enquiries"  title="Notification">
	                    <i class="fa fa-envelope-o fa-lg" style="font-size:20px;"></i>
	                    {% if enqcount %}                        
	                        <i class="label label-danger" style="font-size:10px;">{{enqcount.count}}</i>
	                    {% endif %}  
	                </a>
	            </li>
					<li id="divUserInfo"><a class="dropdown-toggle"
						data-toggle="dropdown" href="#" id="btn-group-login"> <i
							class="fa fa-user"></i> <span>{{request.user.username}}</span> <i
							class="fa fa-caret-down"></i></a>

						<ul class="dropdown-menu">
							<li><a href="/siteviz/changepass/"><i class="fa fa-undo"></i>
									&nbsp;Change Password</a></li>
							<!-- <li><a href="logout">Log Out</a></li> -->
							<li><a href="/siteviz/logout/"><i class="fa fa-sign-out"></i>&nbsp;Log
									Out</a></li>
						</ul> 
						<label id="lblRole" style="display:none">{{request.session.userrole}}</label>
						<label id="lblIp" style="display:none">{{userip}}</label>
						<label id="lblMapPublished" style="display:none">{{mapdefined}}</label>
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<div class="container"> {%block content %} 
							{% endblock %}
	</div>
	<div class="modal fade" id="customerlogin" tabindex="-1" role="dialog" aria-labelledby="customerlogin" aria-hidden="true" data-backdrop="static" data-keyboard="false">
                  <div class="modal-dialog">
                      <div class="modal-content">
                          <div class="modal-header bg-primary">
                              <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                              <h4 class="modal-title" id="">Login</h4>
                          </div>
                          <div class="modal-body">
                          <form action="customerlogin" method="post" class="form-horizontal">
                			  {% csrf_token %}
                          	  <!--Begin modal body -->
                              <div class="form-horizontal col-sm-12" style="margin-left:auto;margin-right:auto;">
                              <br/>
                                  <input id="cust_id" style="display:none">
                                  <div class="form-group"><label class="control-label">Username</label>
                                      <input type="text" id="cust_username" class="form-control" placeholder="username" required="required" data-placement="top" data-trigger="manual" name="customerusername">
                                  </div>
                                  <div class="form-group"><label class="control-label">Password</label>
                                      <input type="password" id="cust_password" class="form-control" placeholder="password" required="required" data-placement="top" data-trigger="manual" name="customerpassword">
                                  </div>                        
                              </div>
                              <!--Begin modal-footer-->
                             <div class="modal-footer">
                                    <button class="btn btn-primary bt-md pull-right"><i class="fa fa-sign-in fa-lg"></i> Log in</button>
                                    <button class="btn btn-danger" data-dismiss="modal" id="btnClose" style="width:80px;"><i class="fa fa-times"></i>&nbsp;Close</button>&nbsp;&nbsp;
                                    <p class="help-block text-danger hide alert alert-danger" id="form-error" style="color:#a94442;margin-left:140px;width: 250px;text-align: center;">&nbsp; The form is not valid. </p>
                                  <div class="alert col-md-8" id="doc-alert" role="alert" style="text-align:center;"></div>                           
                             </div><!--End modal-footer-->
                             </form>
                          </div>
                          <!--End modal body row -->
                   </div><!--End-modal-content-->	               
        </div><!--End-modal-dailog-->
    </div><!--End of modal fade-->
</body>

<script type="text/javascript">
	var loginRole;
	var InitLoginRole=function() {
		loginRole = $("#lblRole").text();
	};	
	var currentMode = 'view';
	var isMapPublished = $("#lblMapPublished").text();
	
	var cli_AjaxSetUp=function(){
		function getCookie(name) {
		    var cookieValue = null;
		    if (document.cookie && document.cookie != '') {
		        var cookies = document.cookie.split(';');
		        for (var i = 0; i < cookies.length; i++) {
		            var cookie = jQuery.trim(cookies[i]);
		            // Does this cookie string begin with the name we want?
		            if (cookie.substring(0, name.length + 1) == (name + '=')) {
		                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
		                break;
		            }
		        }
		    }
		    return cookieValue;
		}
		var csrftoken = getCookie('csrftoken');
		function csrfSafeMethod(method) {
		    // these HTTP methods do not require CSRF protection
		    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
		}
		$.ajaxSetup({
		    beforeSend: function(xhr, settings) {
		        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
		            xhr.setRequestHeader("X-CSRFToken", csrftoken);
		        }
		    }
		});
	};
	var ShowAlert=function(title,msg){
		bootbox.dialog({
			  message: msg,
			  title: title,
			  buttons: {
			    Ok: {
			      label: "Ok",
			      className: "btn-primary",
			      callback: function() {}
			    }
			  }
		  });
	};
	$(function(){
	  	$(".dropdown").hover(            
          function() {
              $('.dropdown-menu', this).stop( true, true ).fadeIn("fast");
              $(this).toggleClass('open');
              $('span', this).toggleClass("caret caret-up");                
          },
          function() {
              $('.dropdown-menu', this).stop( true, true ).fadeOut("fast");
              $(this).toggleClass('open');
              $('span', this).toggleClass("caret caret-up");                
          });
		$('.js-activated').dropdownHover().dropdown();	
		loginRole = $("#lblRole").text();	
		if(loginRole==="Reader"){	
			$("#a-logout").css("display","none");
			$("#divUserInfo").css("display","none");
			//$("#divDocInfo").css("display","none");
			$("#notification").css("display","none");
			$("#liAdmin").css("display","none");
			$("#liReports").css("display","none");
			$("#liImport").css("display","none");
			$("#liMode").css("display","none");
			$("#help").css("display","none");
		}
		else if(loginRole==="Marketing"){
			$("#liAdmin").css("display","none");	
			$("#liReports").css("display","none");
			$("#liImport").css("display","none");
			$("#notification").css("display","none");
			$("#help").css("display","none");
		}
		else if(loginRole=="Admin"){	
			$("#liImport").css("display","none");
		}
		else{
			//do nothing for Master as yet.
		}
		if(isMapPublished!==""){
			var geoHandler = new DCGeoHandler();
			geoHandler.ip  = $("#lblIp").text();
			geoHandler.invokeGeoLocation(geoHandler.ip,function(){
				var dict = geoHandler.getGeoDictionary();
				if (cli_AjaxSetUp!==undefined && cli_AjaxSetUp!==null){
					cli_AjaxSetUp();
					$.ajax({
						type:"POST",
						url:"/siteviz/svc_analytics_visited",
						contentType:'application/json; charset=utf-8',
						data:JSON.stringify(dict)
					}).done(function(msg){
						 //don't care - it's only a fire and forget model.
					}).fail(function(xhr, textStatus, errorThrown){
						//don't care - it's only a fire and forget model.
					});		
				}
			});
		}	
		$("#li-view-mode > i").show();
		$("#li-edit-mode > i").hide();
		$("#li-edit-mode").click(function() {
			currentMode = "edit";
			$("#li-view-mode > i").hide();
			$("#li-edit-mode > i").show();
		});
		$("#li-view-mode").click(function() {
			currentMode = "view";
			$("#li-view-mode > i").show();
			$("#li-edit-mode > i").hide();
		});
		$("#li-print-map").click(function() {
			printMap();
		});
		$("#notify").click(function(e){
	        e.preventDefault();         
	    });
	});
</script>
</html>
